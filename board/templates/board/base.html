<!DOCTYPE html>
{% load staticfiles %}

<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Toolkiit</title>

        <!-- Latest compiled and minified CSS -->
            <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
        <!-- End -->

        <!-- Optional theme -->
            <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
        <!-- End -->

        <!-- Latest compiled and minified JavaScript -->
            <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
        <!-- End -->

        <!-- STYLE SHEETS BEGIN -->
            <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
            <link rel="stylesheet" href="{% static 'css/board.css' %}">
            <link rel="stylesheet" href="{% static 'css/mytoolkit.css' %}">
            <link rel="stylesheet" href="{% static 'css/algolia-style.css' %}">
            <script src="{% static 'js/jQuery.js' %}"></script>
        <!-- STYLE SHEETS END -->

        <!-- MIXPANEL BEGINS -->
            <script type="text/javascript">(function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset people.set people.set_once people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);mixpanel.init("e4bb31e190ab171ab9e3c645f7fa89cb");
            </script>
        <!-- MIXPANEL ENDS -->

    </head>

    <body>

        <!-- NAVBAR BEGINS -->
            <nav class="navbar-fixed-top navbar-default navbar-custom" id="nav">
                <div class="container-fluid">
                    <!-- Brand and toggle get grouped for better mobile display -->
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                        <a class="navbar-brand" href="{% url 'board.views.post_list' %}">Toolkiit</a>
                    </div>
                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                        <ul class="nav navbar-nav">
                        </ul>

                        <!-- SEARCH BOX BEGINS -->
                            <form class="navbar-form navbar-left">
                                <div class="form-group">
                                    <input id="search-box" placeholder="What do you want to do better?" autocomplete="on" autocorrect="false" spellcheck="false" type="search" style="width:300px; background: none; box-shadow:none; border-radius: 0px; border: 2px solid  black;" />
                                </div>
                                <button type="submit" class="" style="height: 40px; background: white; border-radius: 0px; border: 2px solid  black; color: black;">
                                    Search
                                </button>
                            </form>
                        <!-- SEARCH BOX ENDS -->

                        <ul class="nav navbar-nav navbar-right">
                            {% if user.is_authenticated %}
                                <li><a href="{% url 'post_new' %}"><span class='glyphicon glyphicon-plus'></span> New Tool</a></li>
                                <li><a href="{% url 'my_toolkit' %}"><span class='glyphicon glyphicon-saved'></span> Saved Tools</a></li>
                                <li><a href="{% url 'logout' %}">Log Out</a></li>
                            {% else %}
                                <li><a href="{% url 'login' %}">Sign In</a></li>
                                <li><a href="{% url 'register' %}">Register</a></li>
                            {% endif %}
                        </ul>
                    </div><!-- /.navbar-collapse -->
                </div><!-- /.container-fluid -->
            </nav>
    <!-- NAVBAR ENDS -->


    <!-- CONTENT BEGINS -->
        <div class="content">
            <div class="row">
              <div class="col-md-12">
                {% block content %}
                {% endblock %}
              </div>
            </div>
        </div>
    <!-- CONTENT ENDS -->


    <!-- ALGOLIA BEGIN -->
        <script src="//cdn.jsdelivr.net/g/algoliasearch,algoliasearch.helper"></script>
        <script src="//cdn.jsdelivr.net/typeahead.js/0.10/typeahead.jquery.min.js"></script>
        <script src="//cdn.jsdelivr.net/hogan.js/3.0/hogan.min.js"></script>

        {% verbatim %}
            <script type="text/template" id="autocomplete">
                <p>
                  {{{ _highlightResult.to_field.value }}} ({{{ _highlightResult.person.value }}}) 
                  <!-- {{objectID}} -->
                </p>
            </script>
        {% endverbatim %}

        <script>
            $(document).ready(function() {
              var $inputField = $('#search-box');
              var template = Hogan.compile($('#autocomplete').text());
              var client = algoliasearch('{{ appID }}', '{{ searchKey }}');
              var index = client.initIndex('{{ indexName }}');
              $('.search-terms a').click(function(e) {
                $inputField.val($(this).text()).change().focus();
              });
              $inputField.typeahead({hint: false}, {
                source: index.ttAdapter(),
                displayKey: 'email',
                templates: {
                  suggestion: function(hit) {
                    return template.render(hit);
                  }
                }
              }).on('change', function(e) {
                console.log('on(change): ' + $inputField.val());
              }).on('keypress', function(e) {
                console.log('on(submit): ' + $inputField.val());
              }).on('typeahead:selected', function(e) {
                console.log( index.objectID );
              });
            });
        </script>
    <!-- ALGOLIA ENDS -->

    <!-- MIXPANEL BEGINS -->
        <script>
            mixpanel.track("Page View")
        </script>
    <!-- MIXPANEL ENDS -->

    </body>
</html>